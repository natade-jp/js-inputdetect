<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>input/IDSwitch.js - InputDetect</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <script src="scripts/commonNav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
</nav>

<div id="main">
    
    <h1 class="page-title">input/IDSwitch.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>﻿/**
 * IDSwitch.js
 *
 * @module InputDetect
 * @author natade (https://github.com/natade-jp)
 * @license MIT
 */

/**
 * スイッチ（ボタン）の押下状態を管理するクラスです。
 * ボタンの押下・離す・押し続け・押した瞬間・離した瞬間など、さまざまなスイッチの状態を判定できます。
 */
export default class IDSwitch {
	/**
	 * 押す、離すが可能なボタンスイッチの状態管理クラス
	 * @constructor
	 */
	constructor() {
		this._initIDSwitch();
	}

	/**
	 * スイッチの状態を初期化します。
	 * @private
	 */
	_initIDSwitch() {
		/**
		 * 押した瞬間にtrueになります（1フレームのみ）
		 * @type {boolean}
		 */
		this.istyped = false;

		/**
		 * 押している間trueになります（押しっぱなし判定）
		 * @type {boolean}
		 */
		this.ispressed = false;

		/**
		 * 離した瞬間にtrueになります（1フレームのみ）
		 * @type {boolean}
		 */
		this.isreleased = false;

		/**
		 * 押している時間（フレーム数）
		 * @type {number}
		 */
		this.pressed_time = 0;
	}

	/**
	 * このスイッチの状態をコピーした新しいインスタンスを返します。
	 * @returns {IDSwitch} 複製したIDSwitchインスタンス
	 */
	clone() {
		const ret = new IDSwitch();
		ret.istyped = this.istyped;
		ret.ispressed = this.ispressed;
		ret.isreleased = this.isreleased;
		ret.pressed_time = this.pressed_time;
		return ret;
	}

	/**
	 * ボタンが押されたことを記録します。
	 * 1フレーム目はistyped、以降はispressedがtrueになります。
	 */
	keyPressed() {
		if (!this.ispressed) {
			this.istyped = true;
		}
		this.ispressed = true;
		this.pressed_time++;
	}

	/**
	 * ボタンが離されたことを記録します。
	 * isreleasedがtrueになり、ispressedがfalseになります。
	 */
	keyReleased() {
		this.ispressed = false;
		this.isreleased = true;
		this.pressed_time = 0;
	}

	/**
	 * フォーカスが外れた場合に状態をリセットします。
	 */
	focusLost() {
		this.keyReleased();
	}

	/**
	 * 他のIDSwitchインスタンスへ現在のスイッチ状態を渡します。
	 * 1フレームごとに必要な値だけを転送し、istyped/isreleasedはfalse化されます。
	 * @param {IDSwitch} c - 情報を受け取るIDSwitchインスタンス
	 * @throws {string} - cがIDSwitchのインスタンスでない場合
	 */
	pickInput(c) {
		if (!(c instanceof IDSwitch)) {
			throw "IllegalArgumentException";
		}
		c.ispressed = this.ispressed;
		c.istyped = this.istyped;
		c.isreleased = this.isreleased;
		c.pressed_time = this.pressed_time;
		this.isreleased = false;
		this.istyped = false;
	}
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.4</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>


<script src="scripts/collapse.js" defer></script>


</body>
</html>
